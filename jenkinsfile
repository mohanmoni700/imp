pipeline {

    agent any
    parameters {
     choice(name:'stage_name' , choices:['stage1' , 'stage2' , 'stage3'] , description: 'enter the stage name which wants to exec')
    }


    stages {
            stage('stage1') {
            when {
                expression{ params.stage_name == "stage1" }
                branch 'main'
                
                }
            
                
                steps {
                    sh '''
                    echo mohan
                    sleep 5
                    '''
                    
                }
            }    
            
            stage('stage2') {
             when {
             expression{ params.stage_name == "stage2" }
              }
                steps {
                    
                    catchError(buildResult: 'SUCCESS', stageResult: 'FAILURE') {
                            sh '''
                            echo testing
                            sleep 5
                            
                            '''
                       }     
                     
                }
            }

            stage('stage3') {
            when {
            expression{ params.stage_name == "stage3" }
             }
                  steps {
                    sh '''
                     echo deploy

                     '''
                    sh 'sleep 5'
                }
            }

    }


}
